# ===============================================
# üöÄ NOTE-BLOC API - Configuration Complete
# ===============================================

# ===============================================
# üåê SERVER CONFIGURATION
# ===============================================
# Port fixe pour √©viter les changements
server.port=8090
server.servlet.context-path=/
server.servlet.encoding.charset=UTF-8
server.servlet.encoding.enabled=true
server.servlet.encoding.force=true

# ===============================================
# üìä DATABASE CONFIGURATION - H2 (Development)
# ===============================================
# Base de donn√©es H2
spring.datasource.url=jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=
spring.datasource.initialization-mode=always

# Console H2
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console
spring.h2.console.settings.trace=false
spring.h2.console.settings.web-allow-others=false

# ===============================================
# üóÑÔ∏è JPA/HIBERNATE CONFIGURATION
# ===============================================
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.use_sql_comments=true
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.jdbc.batch_versioned_data=true

# D√©sactiver l'avertissement JPA open-in-view
spring.jpa.open-in-view=false

# ===============================================
# üîê JWT CONFIGURATION
# ===============================================
app.jwt.secret=myVerySecretKeyForJWTTokenGenerationNoteBloc2025!@#$%^&*()
app.jwt.expiration=86400000
app.jwt.refresh.expiration=604800000

# ===============================================
# üîí SPRING SECURITY CONFIGURATION
# ===============================================
spring.security.user.name=admin
spring.security.user.password=admin123
spring.security.user.roles=ADMIN

# ===============================================
# üìö OPENAPI/SWAGGER CONFIGURATION
# ===============================================
springdoc.api-docs.path=/v3/api-docs
springdoc.api-docs.enabled=true
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.enabled=true
springdoc.swagger-ui.operationsSorter=method
springdoc.swagger-ui.tagsSorter=alpha
springdoc.swagger-ui.try-it-out-enabled=true
springdoc.swagger-ui.filter=true
springdoc.swagger-ui.display-request-duration=true
springdoc.swagger-ui.doc-expansion=none
springdoc.swagger-ui.disable-swagger-default-url=true

# Informations de l'API
app.openapi.dev-url=http://localhost:8090
app.openapi.prod-url=https://api.notebloc.com

# ===============================================
# üìä SPRING BOOT ACTUATOR (Monitoring)
# ===============================================
management.endpoints.web.exposure.include=health,info,metrics,prometheus,env
management.endpoint.health.show-details=when_authorized
management.endpoint.info.enabled=true
management.endpoint.metrics.enabled=true
management.info.env.enabled=true

# Informations de l'application
info.app.name=Note-Bloc API
info.app.description=Advanced Note Management API with Spring Boot 3
info.app.version=1.0.0
info.app.encoding=UTF-8
info.app.java.version=17

# ===============================================
# üõ°Ô∏è CORS CONFIGURATION
# ===============================================
cors.allowed-origins=http://localhost:3000,http://localhost:5173,http://localhost:8080
cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS,PATCH
cors.allowed-headers=*
cors.allow-credentials=true

# ===============================================
# ‚úÖ VALIDATION CONFIGURATION
# ===============================================
spring.jackson.default-property-inclusion=NON_NULL
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.serialization.indent-output=true
spring.jackson.deserialization.fail-on-unknown-properties=false

# ===============================================
# üìù LOGGING CONFIGURATION
# ===============================================
# Niveau de logs
logging.level.org.springframework.security=INFO
logging.level.org.springframework.web=INFO
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE
logging.level.com.projectnote.note_bloc=DEBUG
logging.level.org.springframework.boot.autoconfigure.security=INFO

# Configuration des logs
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n
logging.file.name=logs/note-bloc.log
logging.file.max-size=10MB
logging.file.max-history=30

# ===============================================
# üöÄ APPLICATION SPECIFIC CONFIGURATION
# ===============================================
# Configuration de l'application
app.name=Note-Bloc
app.version=1.0.0
app.description=Advanced Note Management API
app.contact.email=contact@notebloc.com
app.contact.url=https://notebloc.com

# Limites de l'application
app.notes.max-title-length=200
app.notes.max-content-length=50000
app.notes.max-tags-per-note=10
app.notes.max-notes-per-user=1000

# Configuration des pages
app.pagination.default-page-size=20
app.pagination.max-page-size=100

# ===============================================
# üîç SEARCH CONFIGURATION
# ===============================================
app.search.min-query-length=3
app.search.max-results=500

# ===============================================
# üîó PUBLIC LINKS CONFIGURATION
# ===============================================
app.public-links.default-expiration-days=30
app.public-links.max-expiration-days=365
app.public-links.token-length=32

# ===============================================
# üìß EMAIL CONFIGURATION (Optional)
# ===============================================
# Configuration email (si vous ajoutez l'envoi d'emails)
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=${EMAIL_USERNAME:}
spring.mail.password=${EMAIL_PASSWORD:}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true

# ===============================================
# üî• CACHE CONFIGURATION
# ===============================================
spring.cache.type=simple
spring.cache.cache-names=notes,users,public-links
spring.cache.caffeine.spec=maximumSize=1000,expireAfterAccess=300s

# ===============================================
# ‚ö° PERFORMANCE CONFIGURATION
# ===============================================
# Configuration des threads
server.tomcat.threads.max=200
server.tomcat.threads.min-spare=10
server.tomcat.max-connections=8192
server.tomcat.accept-count=100

# Configuration de la compression
server.compression.enabled=true
server.compression.mime-types=text/html,text/xml,text/plain,text/css,text/javascript,application/javascript,application/json
server.compression.min-response-size=1024

# ===============================================
# üß™ TEST CONFIGURATION
# ===============================================
# Configuration pour les tests
spring.test.database.replace=none
spring.jpa.hibernate.ddl-auto=create-drop

# ===============================================
# üîß DEVELOPMENT TOOLS
# ===============================================
# DevTools (reload automatique en d√©veloppement)
spring.devtools.restart.enabled=true
spring.devtools.livereload.enabled=true
spring.devtools.restart.additional-paths=src/main/java
spring.devtools.restart.exclude=static/**,public/**

# ===============================================
# üåç INTERNATIONALIZATION
# ===============================================
spring.messages.basename=messages
spring.messages.encoding=UTF-8
spring.messages.fallback-to-system-locale=false
spring.web.locale=fr_FR
spring.web.locale-resolver=fixed

# ===============================================
# üìä METRICS CONFIGURATION
# ===============================================
management.metrics.enabled=true
management.metrics.export.prometheus.enabled=true
management.metrics.distribution.percentiles-histogram.http.server.requests=true
management.metrics.tags.application=${app.name}

# ===============================================
# üîê SECURITY HEADERS
# ===============================================
server.servlet.session.cookie.secure=false
server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.same-site=strict
